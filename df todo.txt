commit notes:
-added combo timing system
-added system for combo slowdown, but unsure about its quality (going slower is usually bad); but without it, you can facehug with no penalty.
-added combo move lockout system, where you must continue the combo to be able to use later moves. 

======= NOTES
collision layers/masks notes:
	layer: gets hit
	mask: hits others
	- 1: everything related to units moving and hitting world border or obstacles.
	- 9: everything related to RANGED ANTI-ENEMY projectiles hitting units and obstacles.
	- 10: everything related to MELEE ANTI-ENEMY projectiles
	- 17: everything related to ANTI-ALLY projectiles hitting units and obstacles
	- 18: everything related to ANTI-ALLY projectiles hitting units and obstacles

======= THE BIG DEAL: MAJOR combat feeling rework
ideal to pursue:
	- player slides in, hits enemy with a three hit combo back to back in short time
	- swaps loadout and the player has a chance to reposition for a split second (enemy can dodge?)
	- player continues with second combo
	enough for now.

(lock enemy behavior for now, don't need them.)

1. remove summon type moves.......................................[DONE]
a. rework move firing timing......................................[DONE]
b. loadout swap visual indicator..................................[DONE]
2. hit stun and attack cancel rework..............................[DONE]
3. combo rework...................................................[DONE]
a. dash move halt without passthrough.............................[DONE]
b. added shock move...............................................[DONE]
b. combo soft limiting (timing)...................................[DONE]

4. combo hard limiting (heat).....................................[]

. mobility and enemy dashing.....................................[]
. refactoring ai behavior........................................[]
. attack permission mechanic.....................................[]




	
- combo hard limiting (heat):
	escaping combo:
	- you can do this by moving/boosting after move stun has elapsed

	limiting combo:
	- in baldr sky they have heat, which is on your end. forces you to take a break.
	- between putting something on your end or something on the enemy end, it's better on your end, right?
	- otherwise you could just always be attacking; undesirable.
	so a self-limiting factor seems best.
	- something as basic as: every move you use increases heat? when heat is over the max, you're done.
	- maybe you do whole loadouts at a time though? you only have to check for overheat when getting your next loadout. so you can tack on a loadout at the end with massive heat cost. interesting feature. essentially a combo finisher.
	heat gauge ticks down when you are officially out of combo. can't attack until total refresh.

- rework loadout system:
	- controls which group of 3 moves you will get to next
	- if interrupted in the middle of a loadout, lose the whole combo.
	

- mobility and enemy dashing:
	- units should be repositioning more and faster type stuff. Just faster paced game.
	- they can attack quickly; not as big a deal if it doesn't stun for long.
	- they can quickly: reposition with a dash->dive in and attack. 

- refactoring ai behaviour:
	- create a desire system that chooses between x actions: move, attack, change target, dodge, etc
	put the action delay onto the specific action's side.
	could create more complex behavior compared to what we have now.
	also simpler.
	also includes attack permission:
	- manage so a unit can only have like 1 person diving them, 1 person skirmishing them
	- everyone else has to hover around
	

- issue with dash attack moves:
	- obnoxious little extra boost of speed in our dash moves? make sure this can't happen.


- new move type:
	- on_mouse. a projectile which spawns on mouse and then slowly trails after it.
	quite slow of course.

- combo routing factors:
	in baldr sky, move order is quite technical because of launching and knockdown
	- our system doesn't have either of these things.
	what limits do we have in terms of which moves you can connect together?
	- power cost: which will determine the length of your combo. 
	- range of the move: mixing close and far ranges can be tricky.
	- knockback: a big knockback move will knock an enemy out of range of a short move.
	- future 'flow': some moves do damage relative to flow generated, and may consume it.

==============

- new mechanic idea, attack permission:
	for fighting multiple enemies, so test it against 2,3,4 enemies
	- anti dogpile/anti chaos mechanic. 
	- Before executing your move, you need 'attack permission' from the game mother.
	- maintains a dict of 'unit_id: permission time left'
	- attack permission, when obtained, is a timer that lasts x time.
	- when it's 0, game mother can give a new unit attack permission for the given target.
	hopefully this would lead to a situation where you are surrounded, but you fight them all at once.
	so you have to dodge them one at a time, which keeps the pressure up but also gives you counterplay.

- combat feel:
	work on these in a small scale, 1-on-1 situation. Then scale them up and see.
	remember:
	- each move should feel significant.
	- play should feel technical.
	- enemies should feel like they have clear openings.
		(ex1: adelie dive attack: start, move in line, recover standing still for a moment; lock movement while recovering. uses standing.)
		(ex2: unit fires projectiles in line, slowly banking but not enough. We move around it and it finishes; lock movement while recovering. then we hit in that window.)
	maybe i need to carefully study the behaviour of a baldr sky enemy.



- new mechanic idea, slam:
	- when a unit is in stun and hits a 2d collider, like a unit or obstacle unit, it is 'slammed'
	it can take some more damage, display the 'SLAM' text, show a special anim frame if you want


===== end of combat feel rebalance branch

- iterating on art:
	overall darker and more muted theme.
	- new background too
	- look at sketchbook drawings 
	- see if we can go for a more serious style (remember people are gonna die)
	you can use Friday as the case study? or maybe anse, idk
	
	- consider increasing sprite size to like 1200x or 1500x to allow for more detailed drawings.
	- and place emphasis on backpacks/engines and hip jets. bulkier, like old infantry designs.
	- named characters should have hair poking through and unique/strong/distinctive designs.

- Friday unit:
	- object
	- spritesheet
	- moveset

- death movement bug:
	- on death, enemy momentum stops completely. Change this so they continue getting knocked back.

- ai dodging:
	- more advanced units (allies or enemies) need to be able to dodge at least a little
	could start with something as simple as:
	- wherever it is you want to be, if you feel you are under threat
		- you want distance but enemy close, or you want close but enemy distant (but not too distant)
		- and you are not too close already to target position
	- if you can, then use your boost in the direction you want to go
	this will naturally help units either close distance or make distance.
	remember, boost is already implemented in unit body, so just have to do flags.
	summary: if enemy is near you, is attacking; then you dodge away from them.

- ai delay between actions value as a range:
	consider this: for some enemies, to make them more unpredictable:
	- delay between actions can become a range and stuff.
	
- combat feeling review:
	- it's not enough to just work, it must also feel right.
	we will be able to judge it feels right if we're in a situation where:
	- we have a scene in a pretty encounter map with anse + Friday vs like 4 adelie.
	- also test a scene against a more boss-like enemy. Faster to react, does combos, etc
	do these feel good?
	
	important things:
	- does it feel slick? like you know what's happening? what's going on?
	- moves should have weight behind them. it should feel like: Bang! to bang! to bang!
	each thing you do, you're doing on purpose, and the game clearly reacts to you doing it.

sound overhaul:
	lots of things need sound:
	- units moving
	- environment (wind, snow, rain, creaking, etc)
	- unit using a move
	- unit being hit by a move
	- music

- alternate attack system, in case this falls apart:
	you have a combo counter from 1...x
	- you equip weapons (attack patterns) where the move differs depending on combo counter
	- you can switch which weapon you are attacking with in the middle of the combo.
	e.g. you can attack snaphammer1 -> snaphammer2 -> rifle3 -> box4 -> rifle5 -> ...
	or any other combination that you want.	
	note: this does feel like an idea where

================

- art overhaul:
	- the spritesheet for anse will need to be redone at some point. Probably by adding his hair and changing colours to the brown/tan of his coat.
		- maybe could do something like tall lined collar but no hood; go back to big collared anse. symbolic, etc, after all.
	Here's a general idea. For generic FSes, they can wear full hoods.
	But for important characters, they should have their hair visible somewhere.

- if there is some kind of special move:
	it would be to skip the loadout timer swap and immediately go to the next one.
	- break accumulates on units normally, when a unit is broken, though:
	- no loadout skip on switch

- grounded snow effect:
	- when you change direction or come to a stop, pop us a snow effect?

- weather effect:
	- snow or rain particle effects on screen, at varying intensity.

- debris effect:
	- when a unit is defeated, create some relevant debris on the ground near them
	ferra leave parts, Friday will leave her coat, etc.

- system to fire projectiles in multiple directions
	of course we want moves that are able to shoot in every direction.
	in addition to the projectile list, there is a projectile offset list
	- for each entry in the projectile list, it fires a projectile at every position in the offset list.
	- entries in the list range from 0-359 are correspond to a position around the unit relative to the position
	  of the unit circle arrow.

- new movement system to consider and test
	ACTUALLY, here's like probably a way better idea:
	- in normal movement mode, wasd like already implemented.
	- instead of shift being a boost, pressing shift would enter into flight mode.
	- when in flight mode, character moves in direction of pointer. faster than normal.
	- probably there would also be a limited duration to it. and also a lockout period too.
	- simple as.
	so you would only want to do this to escape enemies, or close distance fast, or dodge a tricky attack.
	- does it create a situation where you can just shift and run away every time an enemy attacks?
	- maybe, but you still have to get closer yourself too, you know.
	- also, you could still do that in baldr sky, but game still slapped.
	- our method of forcing different weapon sets to be equipped should combat that, right?

- camera manager:
	-zoom and move camera so that it can capture everything we want in frame at the same time
	-always the player, and it will expand to try to fit the last _ units you have hit within _ time

- create proper loadouts:
	- see paper notes about this

- flow mechanic:
	-some moves generate 'flow'
	-some moves can consume 'flow' to change their effect
	just a little something for players to think about when building a combo, that's it.
	-losing flow: if you get hit? if you miss a move?
	-showing flow: something around the player, visually. Like orbs or lines?

- encounter scene expansion:
	a given encounter will be made up of the following:
	- geography: the scene that holds the mat and the obstacles placed on it.
	- army setup: given the geography, this is where all units are placed initially.
	- plot: potential intro and ending cutscene sequences. Kept simple, usually.
	- encounter: rules that dictate how the encounter will play out in terms of combat, like:
		- when to spawn additional enemies/allies (timing, defeated x, etc)
		- unusual victory/defeat conditions (time elapses, ally/boss defeated, etc)
		- scrolling, the route and the speed, if applicable.
		this could end up being complicated, with scrolling, then a room, then more scrolling, etc.
	so create a full encounter scene with all this stuff defined.

- backgrounds and collision (graphical)
	- it would be really cool if objects and background borders had an indicator of where
	  exactly a border is.
	- for example, something like an inobtrusive dotted line around the edges of collision objects.
	bake it into art? seems simplest.
	can then just draw polygons along them.

- red line tracer
	- should we draw a line between mouse position and player to help with aiming?

- fill loadouts properly:
	-see paper notes for movesets for prologue units.

- encounter ai:
	-there is an encounter manager which helps with:
		-spawning reinforcements, timing, objectives, ending on death/victory.

start of battle animation:
	-if would be cool if there was an animation with all the rings coming on as the fight began. Like a bootup. Like, rapidly increase the ring's scale from 0 to 1 over a time window.

- loadout system:
	- a simple and elegant way to determine which loadout you're switching to next
	rather than just going through them all in a preset order.
	(for the beginning, we only have 2 loadouts so we can ignore it for now.)
	(mousewhell scroll?)
	(or pressing 1/2/3/4?) <-- fav so far, because it lets you choose any cleanly.
	(or leftclick/rightclick to select either prev or former loadout?)
	the idea is that, although you can't choose a particular move for any situation, you can choose the perfect loadout for the given moment. So it's a bit higher level.

== vn don't forget

-visuals (to consider)
	-lip sync
	-blinking
	-breath
	-pose changing (like sideview, or back.)
	-small window (for anse's hands, the box, e.g. a necklace, etc)
	-being able to animate while speaking.
	-variable text bubble location, like near the speaker.
	-weather



