commit notes:
-reversed order of attack priority, giving precedence to the attack which began first
-implemented basic attack permission mechanic
-cleaned up todo list a bit too

======= NOTES
collision layers/masks notes:
	layer: gets hit
	mask: hits others
	- 1: everything related to units moving and hitting world border or obstacles.
	- 9: everything related to RANGED ANTI-ENEMY projectiles hitting units and obstacles.
	- 10: everything related to MELEE ANTI-ENEMY projectiles
	- 17: everything related to ANTI-ALLY projectiles hitting units and obstacles
	- 18: everything related to ANTI-ALLY projectiles hitting units and obstacles

======= THE BIG DEAL: ai behavior overhaul

1. attack permission behavior.....................................[DONE]
a. tweak attack priority interaction..............................[DONE]
2. mobility and ai boosting.......................................[]

. mode to watch ai units fight without my action.................[]



- refactoring ai behaviour:
	- DODGE: enemy close enough to you and your heat is above a certain level and you can boost.
		-> boost away at a semi random angle
	create this, but it is an option configurable/only for certain units

- new move type:
	- on_mouse. a projectile which spawns on mouse and then slowly trails after it.
	quite slow of course.



===== end of combat branch

- iterating on art:
	(see new refs folder featuring the work of the amazing [frider])
	overall darker and more muted visual style.
	- new background too
	- look at sketchbook drawings 
	- see if we can go for a more serious style (remember people are gonna die)
	you can use Friday as the case study? or maybe anse, idk
	
	- consider increasing sprite size to like 1200x or 1500x to allow for more detailed drawings.
	- and place emphasis on backpacks/engines and hip jets. bulkier, like old infantry designs.
	- named characters should have hair poking through and unique/strong/distinctive designs.

- art overhaul:
	- the spritesheet for anse will need to be redone at some point. 
	Probably by adding his hair and changing colours to the brown/tan of his coat.
	- maybe could do something like tall lined collar but no hood; go back to big collared anse.
	(symbolic, etc, after all.)
	Here's a general idea. For generic FSes, they can wear full hoods.
	But for important characters, they should have their hair visible somewhere.

- Friday unit:
	- object
	- spritesheet
	- moveset

- death movement bug:
	- on death, enemy momentum stops completely.
	Consider changing this so they do take proper knockback back.

- ai dodging:
	- more advanced units (allies or enemies) need to be able to dodge at least a little
	could start with something as simple as:
	- wherever it is you want to be, if you feel you are under threat
		- you want distance but enemy close, or you want close but enemy distant (but not too distant)
		- and you are not too close already to target position
	- if you can, then use your boost in the direction you want to go
	this will naturally help units either close distance or make distance.
	remember, boost is already implemented in unit body, so just have to do flags.
	summary: if enemy is near you, is attacking; then you dodge away from them.

- ai delay between actions value as a range:
	consider this: for some enemies, to make them more unpredictable:
	- delay between actions can become a range and stuff.
	
- combat feeling review:
	- it's not enough to just work, it must also feel right.
	we will be able to judge it feels right if we're in a situation where:
	- we have a scene in a pretty encounter map with anse + Friday vs like 4 adelie.
	- also test a scene against a more boss-like enemy. Faster to react, does combos, etc
	do these feel good?
	
	important things:
	- does it feel slick? like you know what's happening? what's going on?
	- moves should have weight behind them. it should feel like: Bang! to bang! to bang!
	each thing you do, you're doing on purpose, and the game clearly reacts to you doing it.

sound overhaul:
	lots of things need sound:
	- units moving
	- environment (wind, snow, rain, creaking, etc)
	- unit using a move
	- unit being hit by a move
	- music

- alternate attack system, in case this falls apart:
	you have a combo counter from 1...x
	- you equip weapons (attack patterns) where the move differs depending on combo counter
	- you can switch which weapon you are attacking with in the middle of the combo.
	e.g. you can attack snaphammer1 -> snaphammer2 -> rifle3 -> box4 -> rifle5 -> ...
	or any other combination that you want.	
	note: this does feel like an idea where

- combo routing factors:
	in baldr sky, move order is quite technical because of launching and knockdown
	- our system doesn't have either of these things.
	what limits do we have in terms of which moves you can connect together?
	- move output cost: which will determine the length of your combo, and also last move, which is free.
	- range of the move: mixing close and far ranges can be tricky.
	- knockback: a big knockback move will knock an enemy out of range of a short move.
	- future 'flow': some moves do damage relative to flow generated, and may consume it.
	yeah, this has been resolved now. But we'll keep it around for now so we keep it in mind.

================


- grounded snow effect:
	- when you change direction or come to a stop, pop us a snow effect?

- weather effect:
	- snow or rain particle effects on screen, at varying intensity.

- debris effect:
	- when a unit is defeated, create some relevant debris on the ground near them
	ferra leave parts, Friday will leave her coat, etc.

- system to fire projectiles in multiple directions
	of course we want moves that are able to shoot in every direction.
	in addition to the projectile list, there is a projectile offset list
	- for each entry in the projectile list, it fires a projectile at every position in the offset list.
	- entries in the list range from 0-359 are correspond to a position around the unit relative to the position
	  of the unit circle arrow.

- camera manager:
	-zoom and move camera so that it can capture everything we want in frame at the same time
	-always the player, and it will expand to try to fit the last _ units you have hit within _ time

- create proper loadouts:
	- see paper notes about this

- flow mechanic:
	-some moves generate 'flow'
	-some moves can consume 'flow' to change their effect
	just a little something for players to think about when building a combo, that's it.
	-losing flow: if you get hit? if you miss a move?
	-showing flow: something around the player, visually. Like orbs or lines?

- encounter scene expansion:
	a given encounter will be made up of the following:
	- geography: the scene that holds the mat and the obstacles placed on it.
	- army setup: given the geography, this is where all units are placed initially.
	- plot: potential intro and ending cutscene sequences. Kept simple, usually.
	- encounter: rules that dictate how the encounter will play out in terms of combat, like:
		- when to spawn additional enemies/allies (timing, defeated x, etc)
		- unusual victory/defeat conditions (time elapses, ally/boss defeated, etc)
		- scrolling, the route and the speed, if applicable.
		this could end up being complicated, with scrolling, then a room, then more scrolling, etc.
	so create a full encounter scene with all this stuff defined.

- backgrounds and collision (graphical)
	- it would be really cool if objects and background borders had an indicator of where
	  exactly a border is.
	- for example, something like an inobtrusive dotted line around the edges of collision objects.
	bake it into art? seems simplest.
	can then just draw polygons along them.

- red line tracer
	- should we draw a line between mouse position and player to help with aiming?
	- or is it just cool?

- encounter ai:
	-there is an encounter manager which helps with:
		-spawning reinforcements, timing, objectives, ending on death/victory.

start of battle animation:
	-if would be cool if there was an animation with all the rings coming on as the fight began. Like a bootup. Like, rapidly increase the ring's scale from 0 to 1 over a time window.

- loadout system swap choice:
	- a simple and elegant way to determine which loadout you're switching to next
	rather than just going through them all in a preset order.
	(for the beginning, we only have 2 loadouts so we can ignore it for now.)
	(mousewhell scroll?)
	(or pressing 1/2/3/4?) <-- fav so far, because it lets you choose any cleanly.
	(or leftclick/rightclick to select either prev or former loadout?)
	the idea is that, although you can't choose a particular move for any situation, you can choose the perfect loadout for the given moment. So it's a bit higher level.
	remember, it is time sensitive as you only have a short window.
	- but to counteract this, you can enter the next loadout at any time to buffer it.


== vn don't forget

-visuals (to consider)
	-lip sync
	-blinking
	-breath
	-pose changing (like sideview, or back.)
	-small window (for anse's hands, the box, e.g. a necklace, etc)
	-being able to animate while speaking.
	-variable text bubble location, like near the speaker.
	-weather



